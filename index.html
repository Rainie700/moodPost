<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>æ¨¹æ´æŠ•ç¨¿ â€” Mood Post-it Bot</title>
  <style>
    :root{
      --brown-900:#3e2723;
      --brown-700:#5d4037;
      --brown-500:#8d6e63;
      --brown-300:#d7ccc8;
      --cream:#efebe9;
      --accent:#b68f6a;
      --glass: rgba(255,255,255,0.6);
      --card-shadow: 0 6px 18px rgba(46,40,38,0.12);
      font-family: "Noto Sans TC", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }

    html,body{height:100%;}
    body{
      margin:0;
      background: linear-gradient(180deg, var(--cream), #fbf7f5 60%);
      color:var(--brown-900);
      -webkit-font-smoothing:antialiased;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
    }

    .container{
      width:100%;
      max-width:920px;
      background: linear-gradient(180deg, rgba(255,255,255,0.85), rgba(255,255,255,0.9));
      border-radius:16px;
      box-shadow: var(--card-shadow);
      overflow:hidden;
      display:grid;
      grid-template-columns: 1fr 380px;
      gap:20px;
      padding:22px;
    }

    /* mobile */
    @media (max-width:880px){
      .container{grid-template-columns:1fr; padding:16px;}
    }

    /* Left: form + info */
    .left{
      padding:8px 14px;
    }
    .brand{
      display:flex;
      gap:12px;
      align-items:center;
      margin-bottom:8px;
    }
    .logo{
      width:56px;
      height:56px;
      border-radius:12px;
      background:linear-gradient(135deg,var(--brown-700),var(--accent));
      display:flex;
      align-items:center;
      justify-content:center;
      color:var(--cream);
      font-weight:700;
      box-shadow: 0 6px 14px rgba(0,0,0,0.08);
      flex:0 0 56px;
    }
    .brand h1{
      margin:0;
      font-size:18px;
      color:var(--brown-900);
      line-height:1;
    }
    .brand p{margin:0;font-size:13px;color:var(--brown-500);}

    .card{
      background:linear-gradient(180deg, rgba(255,255,255,0.6), var(--glass));
      border-radius:12px;
      padding:12px;
      margin-top:12px;
      box-shadow: 0 4px 12px rgba(14,10,8,0.05);
    }

    label{display:block;font-size:13px;margin-bottom:6px;color:var(--brown-700);}
    input[type="text"], textarea, select{
      width:80%;
      padding:10px 12px;
      border-radius:10px;
      border:1px solid rgba(93,64,55,0.12);
      background:transparent;
      font-size:14px;
      resize:vertical;
      color:var(--brown-900);
    }
    textarea{min-height:120px; max-height:360px;}
    .row{display:flex;gap:8px;align-items:center;}
    .small{font-size:12px;color:var(--brown-500);}

    .actions{
      display:flex;
      gap:10px;
      margin-top:10px;
    }
    button{
      border:0;
      padding:10px 14px;
      border-radius:10px;
      cursor:pointer;
      font-weight:600;
      font-size:14px;
      box-shadow: 0 6px 12px rgba(90,60,45,0.06);
    }
    .btn-primary{
      background: linear-gradient(90deg,var(--brown-700),var(--accent));
      color:var(--cream);
    }
    .btn-ghost{
      background:transparent;
      color:var(--brown-700);
      border:1px dashed rgba(93,64,55,0.12);
    }

    /* Right: posts list */
    .right{
      padding:8px 14px;
      display:flex;
      flex-direction:column;
      gap:12px;
    }
    .right h2{margin:0;font-size:16px;color:var(--brown-700);}
    .posts{
      overflow:auto;
      max-height:520px;
      padding-right:6px;
    }
    .post{
      background:linear-gradient(180deg,#fff, var(--brown-300, #f3ebe6));
      border-radius:10px;
      padding:10px;
      margin-bottom:10px;
      box-shadow: 0 4px 10px rgba(24,18,15,0.04);
      border-left:6px solid rgba(93,64,55,0.12);
    }
    .post .meta{
      display:flex;
      justify-content:space-between;
      gap:10px;
      align-items:center;
      margin-bottom:6px;
    }
    .tag{
      background:rgba(93,64,55,0.08);
      padding:4px 8px;
      border-radius:999px;
      font-size:12px;
      color:var(--brown-700);
    }
    .post p{margin:0;color:var(--brown-900);white-space:pre-wrap;}
    .post small{color:var(--brown-500);font-size:12px}

    .empty{
      color:var(--brown-500);
      font-size:14px;
      padding:18px;
      text-align:center;
    }

    footer.note{
      text-align:center;
      font-size:12px;color:var(--brown-500);
      margin-top:auto;padding-top:8px;
    }

    /* tiny helper */
    .flex-between{display:flex;justify-content:space-between;align-items:center;}
    .muted{color:var(--brown-500);font-size:12px;}
    .danger{background:#ffefe9;color:#7a2918;padding:6px 8px;border-radius:8px;border:0;font-weight:600;}
  </style>
</head>
<body>
  <main class="container" role="main">
    <section class="left" aria-labelledby="form-title">
      <div class="brand">
        <div class="logo">ğŸª¹</div>
        <div>
          <h1 id="form-title">æ¨¹æ´æŠ•ç¨¿ â€” Mood Post-it Bot</h1>
          <p>åŒ¿ååˆ†äº«ä½ çš„å¿ƒæƒ… / å°ç§˜å¯†ï¼Œå®‰å…¨æº«æŸ”çš„ç©ºé–“ã€‚</p>
        </div>
      </div>

      <div class="card" aria-live="polite">
        <label for="mood">å¿ƒæƒ…æ¨™ç±¤</label>
        <select id="mood" aria-label="é¸æ“‡å¿ƒæƒ…">
          <option value="neutral">éš¨ä¾¿ / ä¸­ç«‹</option>
          <option value="happy">é–‹å¿ƒ ğŸ˜Š</option>
          <option value="sad">é›£é ğŸ˜¢</option>
          <option value="stress">ç„¦æ…® ğŸ˜°</option>
          <option value="love">æˆ€æ„› ğŸ’•</option>
          <option value="angry">ç”Ÿæ°£ ğŸ˜ </option>
          <option value="other">å…¶ä»–</option>
        </select>

        <label for="nickname" style="margin-top:10px;">æš±ç¨±ï¼ˆå¯ç©ºç™½ï¼Œå‹¾é¸åŒ¿åå‰‡ä¸é¡¯ç¤ºï¼‰</label>
        <input id="nickname" type="text" placeholder="ä¾‹å¦‚ï¼šå¾®å…‰ / å°æ¨¹æ´å®¢" />

        <label for="content" style="margin-top:10px;">ä½ çš„æ¨¹æ´</label>
        <textarea id="content" placeholder="æŠŠä½ æƒ³èªªçš„å¯«ä¸‹ä¾†ï¼Œé€™è£¡å¾ˆå®‰å…¨ã€‚ä¸è¦ç•™ä¸‹çœŸå¯¦è¯çµ¡æ–¹å¼å–”ã€‚"></textarea>

        <div class="row" style="margin-top:8px;">
          <input id="anonymous" type="checkbox" checked />
          <label for="anonymous" style="margin:0;font-size:13px;color:var(--brown-700);">åŒ¿åç™¼å¸ƒ</label>
        </div>

        <div class="actions">
          <button class="btn-primary" id="btnPost">ç™¼é€åˆ°æ¨¹æ´</button>
          <button class="btn-ghost" id="btnClear">æ¸…é™¤è¡¨å–®</button>
          <button class="btn-ghost" id="btnExport" title="è¼¸å‡ºæœ¬æ©Ÿè³‡æ–™ (JSON)">åŒ¯å‡º</button>
        </div>

        <!--<p class="small" style="margin-top:8px;">æç¤ºï¼šæ­¤ Demo é é¢æœƒæŠŠæŠ•ç¨¿å­˜æ–¼ä½ è‡ªå·±çš„ç€è¦½å™¨ï¼ˆlocalStorageï¼‰ã€‚è‹¥è¦æ”¶é›†åˆ°ä¼ºæœå™¨æˆ–è³‡æ–™åº«ï¼Œæˆ‘å¯ä»¥å†å¹«ä½ æŠŠå¾Œç«¯ç¯„ä¾‹ç¨‹å¼ç¢¼ä¸€èµ·åšå‡ºä¾†ã€‚</p>-->
      </div>

    </section>

    <aside class="right" aria-labelledby="list-title">
      <div class="flex-between">
        <h2 id="list-title">æœ€æ–°æ¨¹æ´</h2>
        <div class="muted">å…± <span id="count">0</span> å‰‡</div>
      </div>

      <div class="posts" id="postsList" tabindex="0" aria-live="polite">
        <div class="empty" id="empty">ç›®å‰é‚„æ²’æœ‰æŠ•ç¨¿ï¼Œæˆç‚ºç¬¬ä¸€å€‹åˆ†äº«çš„äººå§ ğŸŒ±</div>
      </div>

      <footer class="note">
        æœ¬ç³»çµ±ç‚ºåŒ¿ååˆ†äº«ç¤ºç¯„ã€‚è‹¥å…§å®¹æ¶‰åŠè‡ªå‚·/å±éšªï¼Œè«‹ç«‹å³è¯çµ¡ç•¶åœ°ç·Šæ€¥æœå‹™æˆ–å°ˆæ¥­è³‡æºã€‚
      </footer>
    </aside>
  </main>

  <script>
    // å°å‹æŠ•ç¨¿ç³»çµ±ï¼ˆclient-onlyï¼‰
    const el = {
      mood: document.getElementById('mood'),
      nick: document.getElementById('nickname'),
      content: document.getElementById('content'),
      anonymous: document.getElementById('anonymous'),
      btnPost: document.getElementById('btnPost'),
      btnClear: document.getElementById('btnClear'),
      btnExport: document.getElementById('btnExport'),
      postsList: document.getElementById('postsList'),
      empty: document.getElementById('empty'),
      count: document.getElementById('count')
    };

    const STORAGE_KEY = 'mood_postit_posts_v1';

    function loadPosts(){
      try{
        const raw = localStorage.getItem(STORAGE_KEY);
        return raw ? JSON.parse(raw) : [];
      }catch(e){
        console.error(e);
        return [];
      }
    }

    function savePosts(arr){
      localStorage.setItem(STORAGE_KEY, JSON.stringify(arr));
    }

    function renderPosts(){
      const posts = loadPosts();
      el.count.textContent = posts.length;
      el.postsList.innerHTML = '';
      if(posts.length === 0){
        el.postsList.appendChild(el.empty);
        return;
      }
      posts.slice().reverse().forEach((p, idx) => {
        const node = document.createElement('article');
        node.className = 'post';
        node.setAttribute('data-id', p.id);

        const meta = document.createElement('div');
        meta.className = 'meta';
        const left = document.createElement('div');
        left.innerHTML = '<span class="tag">'+ (p.moodLabel || 'éš¨ä¾¿') +'</span>';
        const right = document.createElement('div');
        right.innerHTML = '<small>'+ new Date(p.t).toLocaleString() +'</small>';
        meta.appendChild(left);
        meta.appendChild(right);

        const body = document.createElement('p');
        body.textContent = p.content;

        const foot = document.createElement('div');
        foot.style.marginTop='8px';
        foot.style.display='flex';
        foot.style.justifyContent='space-between';
        foot.style.alignItems='center';

        const author = document.createElement('small');
        author.textContent = p.anonymous ? 'åŒ¿å' : (p.nick || 'è¨ªå®¢');

        const btns = document.createElement('div');
        btns.style.display='flex';
        btns.style.gap='8px';
        const del = document.createElement('button');
        del.className='danger';
        del.textContent='åˆªé™¤';
        del.addEventListener('click', ()=> {
          if(!confirm('ç¢ºå®šè¦åˆªé™¤é€™å‰‡æŠ•ç¨¿ï¼Ÿ')) return;
          const all = loadPosts().filter(x => x.id !== p.id);
          savePosts(all);
          renderPosts();
        });

        btns.appendChild(del);
        foot.appendChild(author);
        foot.appendChild(btns);

        node.appendChild(meta);
        node.appendChild(body);
        node.appendChild(foot);

        el.postsList.appendChild(node);
      });
    }

    function addPost({mood, moodLabel, nick, content, anonymous}){
      if(!content || content.trim().length < 2) {
        alert('è«‹è¼¸å…¥è‡³å°‘ 2 å€‹å­—çš„å…§å®¹å–”ï½');
        return;
      }
      const posts = loadPosts();
      posts.push({
        id: 'p_' + Date.now() + '_' + Math.floor(Math.random()*1000),
        mood,
        moodLabel,
        nick: nick ? nick.trim().slice(0,20) : '',
        content: content.trim(),
        anonymous: !!anonymous,
        t: Date.now()
      });
      savePosts(posts);
      renderPosts();
      // æ¸…é™¤å…§å®¹ä½†ä¿ç•™æš±ç¨±é¸é …
      el.content.value = '';
      el.anonymous.checked = true;
      // è®“ä½¿ç”¨è€…çŸ¥é“æˆåŠŸ
      alert('å·²ç™¼å¸ƒåˆ°æ¨¹æ´ ğŸŒ±');
    }

    // events
    el.btnPost.addEventListener('click', ()=> {
      addPost({
        mood: el.mood.value,
        moodLabel: el.mood.options[el.mood.selectedIndex].text,
        nick: el.nick.value,
        content: el.content.value,
        anonymous: el.anonymous.checked
      });
    });

    el.btnClear.addEventListener('click', ()=> {
      if(!confirm('è¦æ¸…ç©ºè¡¨å–®å—ï¼Ÿ')) return;
      el.mood.selectedIndex = 0;
      el.nick.value = '';
      el.content.value = '';
      el.anonymous.checked = true;
    });

    el.btnExport.addEventListener('click', ()=> {
      const posts = loadPosts();
      const data = JSON.stringify(posts, null, 2);
      const blob = new Blob([data], {type:'application/json'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'mood_postit_posts.json';
      a.click();
      URL.revokeObjectURL(url);
    });

    // init
    renderPosts();

    // small accessibility: allow Ctrl+Enter to submit when typing
    el.content.addEventListener('keydown', (e)=> {
      if((e.ctrlKey || e.metaKey) && e.key === 'Enter'){
        el.btnPost.click();
      }
    });
  </script>
</body>
</html>







